


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/blog/archive/jQuery Ajax and ASP NET by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:25:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../content/css/style.css">
    <link rel="stylesheet" href="../../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../../Content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../../content/site.css">

    <title>jQuery Ajax and ASP .NET - Glass</title>

    <link rel="shortcut icon" href="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../../Content/Site.js"></script>
    <script src="../google-code-prettify.googlecode.com/svn/loader/run_prettify.html"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../../index.html">

                            <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

                        jQuery Ajax and ASP .NET

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row">
        
 

        
<div>
    
</div>
<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">
                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            18 Sep 2010
                        </h3>
                    </li>

                        <li>
                            <h3>
                                <a href="../../About/Mike.html">
                                    <i class="fa fa-pencil"></i>
                                    Mike
                                </a>
                            </h3>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</div>

            <img src="../../-/media/Images/Blogs/Archive/jqueryajax1acf3acf3.jpg?h=65&amp;w=200&amp;la=en&amp;hash=FB781BBA03E49A8C7A72E63BA430B153FC5A91A9" class="pull-right img-responsive img-bordered margin-bottom-10 margin-left-10" alt="">
    




<p class='lead'>This post has been migrated from <strong>www.experimentsincode.com</strong>, we apologise if some of the images or content is missing</p>I recently had to look into how to make an Ajax post back while using ASP.NET, my immediate thought was to use the <a href="http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx">ASP.NET Ajax UpdatePanel</a>. However the client did not use the Ajax library and didn't want to use since their site already used JQuery. My initial thought was that this is going to be a headache, due to the viewstate and ensuring that controls are married up correctly on post back so events fire.

However to my surprise the whole process was very simple!! To start we need to create a page that contains our form:
<pre class="brush:xml">        &lt;form id="form1" runat="server"&gt;
        &lt;div&gt;
            &lt;asp:Literal runat="server" ID="outputTest" /&gt;
            &lt;asp:Button runat="server" ID="submit" Text="Submit" /&gt;
        &lt;/div&gt;
        &lt;/form&gt;</pre>
You may notice that I haven't specified any input elements, I am going to add these to the form dynamically, you can add them in the page but I wanted to make a slightly more complicated demonstration. Ã‚Â The code behind for this page is:
<pre class="brush:c#">public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
   {
        outputTest.Text = "";
        Response.Write(DateTime.Now.ToString());
    }

    public int Count
    {
        get
        {
            if (Session["count"] == null) Session["count"] = 1;
            return (int) Session["count"];
        }
        set
        {
            Session["count"] = value;
        }
    }

    protected override void CreateChildControls()
    {

        for (int i = 0; i &lt; Count; i++)         {
             TextBox txt = new TextBox();
             txt.TextChanged += (object sender, EventArgs e) =&gt;
            {
                TextBox txt1 = (TextBox)sender;
                outputTest.Text += txt1.Text;
            };
            this.Form.Controls.Add(txt);
        }

        Count++;

        base.CreateChildControls();
    }
}</pre>
Every time the page loads an extra text box is added to the page. Ã‚Â On post back any text boxes that have changed will write their output to the literal control.

If you test this page now you should see the time being printed at the top of the page, a few text boxes below that and if you enter some content and submit the form the content should be written to the page:
<p style="text-align: center;"><a href="../../s400290293.websitehome.co.uk/wp-content/uploads/2010/09/jqueryajax1.html"><img class="size-full wp-image-272 aligncenter" title="jqueryajax1" src="../../-/media/Images/Blogs/Archive/jqueryajax121252125.jpg?la=en" alt="" width="328" height="107"></a></p>
Now we want to turn this into an Ajax form using jQuery. To make things a lot simpler we are going to use the <a href="http://jquery.malsup.com/form/#getting-started">jQuery Form Plugin</a>, we add the appropriate script elements to link to both the jQuery core and the form plugin:
<pre class="brush:xml">    &lt;script src="http://code.jquery.com/jquery-1.4.2.min.js" type="text/javascript"&gt;&lt;/script&gt;
    &lt;script src="http://github.com/malsup/form/raw/master/jquery.form.js?v2.43" type="text/javascript"&gt;&lt;/script&gt;</pre>
Now the code to turn the form into an Ajax form:
<pre class="brush:xml">    &lt;script type="text/javascript"&gt;
        $(document).ready(function() {
            SetupForm();
        });
        function SetupForm() {
            $('#&lt;%= form1.ClientID %&gt;').ajaxForm({
                target: 'form',
                replaceTarget: true,
                data: { 'ajax': 'true' },
                success: function() {

                    SetupForm();
                }
            });
       }
    &lt;/script&gt;</pre>
Notice that we have to create a success function that calls the SetupForm method again, this will wire up the form again once we receive the response from the server. The second item of interest is:
<pre> data:{'ajax','true'}</pre>
This sends back an additional form element to the server which we can use to tell that an Ajax submission has been made.

We now need to make one more alteration to out codebehind to get the whole thing to work. We now need to override the RenderControl method:
<pre class="brush:c#">    public override void RenderControl(HtmlTextWriter writer)
    {

        if (Request.Form["ajax"] != null)
        {
            Response.Clear();
            Form.RenderControl(writer);
        }
        else
        {
            base.Render(writer);
        }
    }</pre>
Here we check to see if the form was submitted by the Ajax from submission, if it was we clear any response and just render the form. Otherwise we render the rest of the page as a normal request. Compile and run the page, you should notice that the date and time at the top of the page no longer update as the form is submitted.

    

    </div>
</div>

        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../../index.html" class="">
                                    <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '../www.google-analytics.com/analytics.html', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-16.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/blog/archive/jQuery Ajax and ASP NET by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:25:43 GMT -->
</html>