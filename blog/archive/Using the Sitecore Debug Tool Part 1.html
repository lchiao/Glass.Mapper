


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/blog/archive/Using the Sitecore Debug Tool Part 1 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:25:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../content/css/style.css">
    <link rel="stylesheet" href="../../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../../content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../../content/site.css">

    <title>Using the Sitecore Debug Tool Part 1 - Glass</title>

    <link rel="shortcut icon" href="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../../content/Site.js"></script>
    <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../../index.html">

                            <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

                        Using the Sitecore Debug Tool Part 1

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row">
        
 

        
<div>
    
</div>
<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">
                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            03 Jul 2013
                        </h3>
                    </li>

                        <li>
                            <h3>
                                <a href="../../About/Mike.html">
                                    <i class="fa fa-pencil"></i>
                                    Mike
                                </a>
                            </h3>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</div>

            <img src="../../-/media/Images/Blogs/Archive/DebugButton4b494b49.png?h=126&amp;w=200&amp;la=en&amp;hash=C6018F6795818FFE1C987D320A157420C926ECA9" class="pull-right img-responsive img-bordered margin-bottom-10 margin-left-10" alt="">
    




<p class='lead'>This post has been migrated from <strong>www.experimentsincode.com</strong>, we apologise if some of the images or content is missing</p>Most Sitecore developers know about the Sitecore debugger, if you don't you can access it from the Sitecore menu:

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/DebugButton.html"><img class="alignnone size-medium wp-image-463" title="DebugButton" src="../../-/media/Images/Blogs/Archive/DebugButton21252125.png?la=en" alt="" width="300" height="188"></a>
</div>

This will then load your site in debug mode, if you scroll down the page you should find a breakdown of the rendering process the page went through with some useful information such as duration and items accessed. This in itself is very useful for diagnosing which renderings are taking a long time, for example in the screenshot below I can see that a single rendering is taking around 2 seconds to render by looking at the Profile section:

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/SlowRendering.html"><img class="alignnone" title="SlowRendering" src="../../-/media/Images/Blogs/Archive/SlowRendering21252125.png?la=en" alt="" width="500"></a>
</div>

However this isn't the limit of the debug tool, it is possible to get your own profiling information outputted to this page as well. This is done using the following static methods:
<pre class="csharp">  Sitecore.Diagnostics.Profiler.StartOperation("some value");
  Sitecore.Diagnostics.Profiler.EndOperation("some value");</pre>
The string value passed into to the methods is the value that gets displayed in the Profile output. This value needs to be unique within their scope, lets update my slow rendering so that I can see some custom profiling information coming out:
<pre class="csharp">Sitecore.Diagnostics.Profiler.StartOperation("Why so slow");

Thread.Sleep(2000);  

Sitecore.Diagnostics.Profiler.EndOperation("Why so slow");</pre>
And the result in the debug tool:

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/WhySlowFirst.html"><img class="alignnone size-medium wp-image-469" title="WhySlowFirst" src="../../-/media/Images/Blogs/Archive/WhySlowFirst21252125.png?la=en" alt="" width="500"></a>
</div>

With this you can start to sprinkle your code with profiling code and start to see some useful stats.
<h2>Watch out</h2>
Depending on where you put your slow code depends on where you will see the slow response reported. For example I have moved my slow code to the OnLoad method instead of the Render method:
<pre class="csharp">        protected override void OnLoad(EventArgs e)
        {
            Thread.Sleep(2000);
            base.OnLoad(e);
        }</pre>
This no longer shows in the profile section:

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/MissingProfile.html"><img class="alignnone size-full wp-image-470" title="MissingProfile" src="../../-/media/Images/Blogs/Archive/MissingProfile21252125.png?la=en" alt="" width="635" height="427"></a>
</div>

Instead this now appears in the Sitecore Trace section of the debugger in the entry that follows the "Adding Http Header to Indicate last modification" entry.

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/HttpHeadersSlow.html"><img class="alignnone size-full wp-image-471" title="HttpHeadersSlow" src="../../-/media/Images/Blogs/Archive/HttpHeadersSlow21252125.png?la=en" alt="" width="707" height="85"></a>
</div>

The reason for this is that the Profile section only shows (I think) information when the rendering events are being called and the OnLoad is outside this scope.

There is a way to get around this and that is to use custom profile entries, so lets update the OnLoad event like so:
<pre class="csharp">        protected override void OnLoad(EventArgs e)
        {
            Sitecore.Diagnostics.Profiler.StartOperation("Why so slow");

            Thread.Sleep(2000);

            Sitecore.Diagnostics.Profiler.EndOperation("Why so slow");
            base.OnLoad(e);
        }</pre>
This now produces data in the Profile section:

<div>
<a href="../../www.experimentsincode.com/wp-content/uploads/2013/07/ProfileBack.html"><img class="alignnone size-full wp-image-473" title="ProfileBack" src="../../-/media/Images/Blogs/Archive/ProfileBack21252125.png?la=en" alt="" width="639" height="290"></a>
</div>

<h2>Syntactic Sugar</h2>
I personally don't like having to write the two separated lines because they are disconnected from each other. I would much rather use a using statement. We can do this by creating a class that implements IDisposable and manages the profiler calls:
<pre class="csharp">    public class Profile : IDisposable
    {
        private readonly string _name;

        public Profile(string name)
        {
            _name = name;
            Sitecore.Diagnostics.Profiler.StartOperation(_name);
        }

        public void Dispose()
        {
            Sitecore.Diagnostics.Profiler.EndOperation(_name);
        }
    }</pre>
I can now update my slow rendering with a slightly cleaner version of the code:
<pre class="csharp">using(new Profile("Why so slow"){ 

  Thread.Sleep(2000);  

}</pre>
<h2>When to use</h2>
If you think you might have a long running operation then wrap a profiler around it, for example an expensive query, a twitter request or DB call. Even if your code runs without an issue at the moment still wrap the code in a profile because it will save you time if a problem occurs later.

Consider the scenario where you have deployed a site and 5 months later the client starts to complain that a page is slow. If you haven't added the profilers you would have to download the site and try and replicate the issue locally before trying to work out where the issue is. With the profilers in your code you can jump straight onto the site, open up the Sitecore Debug tool and see which of those calls is misbehaving.

Check out the second <a href="http://www.experimentsincode.com/?p=479">Using the Sitecore Debug Tool Part  2</a>

    

    </div>
</div>

        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../../index.html" class="">
                                    <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '../www.google-analytics.com/analytics.html', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-16.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/blog/archive/Using the Sitecore Debug Tool Part 1 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:25:07 GMT -->
</html>