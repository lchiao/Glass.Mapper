


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/blog/archive/Custom Validators in TDS V5 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:24:08 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../content/css/style.css">
    <link rel="stylesheet" href="../../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../../content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../../content/site.css">

    <title>Custom Validators in TDS V5 - Glass</title>

    <link rel="shortcut icon" href="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../../content/Site.js"></script>
    <script src="../google-code-prettify.googlecode.com/svn/loader/run_prettify.html"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../../index.html">

                            <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

                        Custom Validators in TDS V5

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row">
        
 

        
<div>
    
</div>
<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">
                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            31 Mar 2014
                        </h3>
                    </li>

                        <li>
                            <h3>
                                <a href="../../About/Mike.html">
                                    <i class="fa fa-pencil"></i>
                                    Mike
                                </a>
                            </h3>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</div>

            <img src="../../-/media/Images/Blogs/Archive/TDSValidatorPropertyManagerfba5fba5.png?h=101&amp;w=200&amp;la=en&amp;hash=C96B0639931C209BD02A46C586FACACB0A11C5DE" class="pull-right img-responsive img-bordered margin-bottom-10 margin-left-10" alt="">
    




<p class='lead'>This post has been migrated from <strong>www.experimentsincode.com</strong>, we apologise if some of the images or content is missing</p>Team Development for Sitecore Version 5 introduces the ability to add validators that allow you to check the structure and integrity of a TDS solution. TDS comes with a set of useful validators out of the box but if you need something specific it is possible to create your own custom validators, in this blog post we will look at how we can do this.

First start Visual Studio and create a Class Library project. Once the project is created we need to add references to the following assemblies:
<ul>
	<li>HedgehogDevelopment.SitecoreCommon.Data.dll</li>
	<li>HedgehogDevelopment.SitecoreCommon.Data.Parser.dll</li>
	<li>HedgehogDevelopment.SitecoreProject.Tasks.dll</li>
</ul>
These can be found inÃ‚Â C:\Program Files (x86)\MSBuild\HedgehogDevelopment\SitecoreProject\v9.0.

Next you need to open the <strong>AssemblyInfo.cs</strong> file and add the following to end of the file:
<pre>[assembly: ContainsValidators()]</pre>
This is used by TDS to see if your assembly contains any validators. With this setup we are now ready to create the actual validator. I am going to create a validator that ensures that items do not contain any spaces in their names.

First I create my <strong>NoSpaceValidator</strong> class and inherit from<strong> HedgehogDevelopment.SitecoreProject.Tasks.ProjectAnalysis.UserConfigurableValidator</strong>. The UserConfigurableValidator allows a user to specify additional properties in the Validation Tab, you can inherit from <strong>Validator</strong> if you don't need additional properties:
<div><a href="../../www.experimentsincode.com/wp-content/uploads/2014/03/TDSValidatorPropertyManager.html"><img class="alignnone size-full wp-image-618" title="TDSValidatorPropertyManager" src="../../-/media/Images/Blogs/Archive/TDSValidatorPropertyManager21252125.png?la=en" alt="" width="518" height="262"></a></div>
My class looks like this:
<pre>    public class NoSpaceValidator : UserConfigurableValidator
    {
        public override ValidatorSettings GetDefaultSettings()
        {
        }
        public override IEnumerable&lt;Problem&gt; Validate(Dictionary&lt;Guid, HedgehogDevelopment.SitecoreProject.Tasks.SitecoreDeployInfo&gt; projectItems, System.Xml.Linq.XDocument scprojDocument)
        {
        }
    }</pre>
I next need to add an attribute to my class to inform TDS that this is a validator it can use, this attribute also contains the information that I want to be displayed on the Validator Tab:
<pre>    [ValidatorAttribute("CUS001", Status.Warn, Description = "Sitecore items must not have spaces in names", Name="No Spaces in Names")]
    public class NoSpaceValidator : UserConfigurableValidator
    {
    }</pre>
On the validation tab we can see my attribute information being outputted:
<div><a href="../../www.experimentsincode.com/wp-content/uploads/2014/03/TDSValidatorNames.html"><img class="alignnone size-full wp-image-619" title="TDSValidatorNames" src="../../-/media/Images/Blogs/Archive/TDSValidatorNames21252125.png?la=en" alt="" width="909" height="51"></a></div>
This is the basics setup, next I can specify some default values that will appear in the additional properties list when someone first selects it, this is done in the <strong>GetDefaultSettings</strong> method:
<pre>    [ValidatorAttribute("CUS001", Status.Warn, Description = "Sitecore items must not have spaces in names", Name="No Spaces in Names")]
    public class NoSpaceValidator : UserConfigurableValidator
    {
        public override ValidatorSettings GetDefaultSettings()
        {
            return new ValidatorSettings()
            {
                Properties = new List&lt;string&gt;()
                {
                    "/sitecore",
                }
            };
        }

        public override IEnumerable&lt;Problem&gt; Validate(Dictionary&lt;Guid, HedgehogDevelopment.SitecoreProject.Tasks.SitecoreDeployInfo&gt; projectItems, System.Xml.Linq.XDocument scprojDocument)
        {

        }
    }</pre>
Finally I need to create my validation logic in the validate method, I have commented the code to make it clear what is happening:
<pre>        public override IEnumerable&lt;Problem&gt; Validate(Dictionary&lt;Guid, HedgehogDevelopment.SitecoreProject.Tasks.SitecoreDeployInfo&gt; projectItems, System.Xml.Linq.XDocument scprojDocument)
        {
            //loop through each item in the TDS project
            foreach (var item in projectItems)
            {
                //check that the item path starts with a value specified in the Additional Properties list
                //otherwise we just ignore the item
                if (Settings.Properties.Any(
                        x =&gt; item.Value.Item.SitecoreItemPath.StartsWith(x, StringComparison.InvariantCultureIgnoreCase)))
                {

                    //get the name of the item from the Sitecore Item Path
                    var name = item.Value.Item.SitecoreItemPath.Split('/').Last();
                    //do out check for a space
                    if (name.Contains(" "))
                    {
                        //when a problem is found get the position of it in the TDS project file
                        ProblemLocation position = GetItemPosition(scprojDocument, item.Value.Item);

                        //create a report which will be displayed in the Visual Studio Error List
                        Problem report = new Problem(this, position)
                        {
                            Message = string.Format("A space in item name {0}", item.Value.ParsedItem.Path)
                        };

                        yield return report;
                    }
                }
            }
        }</pre>
Our validator now has all the code that it needs to work, all we need to do now is drop the DLL it into the folder C:\Program Files (x86)\MSBuild\HedgehogDevelopment\SitecoreProject\v9.0.

In our TDS project we will see that the validator now appears (after a VS restart):
<div><a href="../../www.experimentsincode.com/wp-content/uploads/2014/03/TDSValidatorEnabled.html"><img class="alignnone size-full wp-image-620" title="TDSValidatorEnabled" src="../../-/media/Images/Blogs/Archive/TDSValidatorEnabled21252125.png?la=en" alt="" width="404" height="126"></a></div>
And when we compile the project we will start to receive warnings and errors about our TDS project:
<div><a href="../../www.experimentsincode.com/wp-content/uploads/2014/03/TDSValidatorError.html"><img class="alignnone size-full wp-image-621" title="TDSValidatorError" src="../../-/media/Images/Blogs/Archive/TDSValidatorError21252125.png?la=en" alt="" width="296" height="69"></a></div>
Validators are very quick and easy to setup but should allow you to make much more scalable and robust TDS solutions.

    

    </div>
</div>

        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../../index.html" class="">
                                    <img src="../../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '../www.google-analytics.com/analytics.html', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-16.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/blog/archive/Custom Validators in TDS V5 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:24:11 GMT -->
</html>