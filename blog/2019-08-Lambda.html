


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/blog/2019-08-Lambda by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:21:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../content/css/style.css">
    <link rel="stylesheet" href="../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../content/site.css">

    <title>Lambda Expressions - Glass</title>

    <link rel="shortcut icon" href="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../content/Site.js"></script>
    <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../index.html">

                            <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

Blog -                         Lambda Expressions

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row padding-bottom-20">
        <p>
            <strong>
                <a href="../blog-2.html">&lt;&lt; Back to Blogs</a>
            </strong>
        </p>
    </div>
    <div class="row">


        


<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">

                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            September 2019
                        </h3>
                    </li>

                    <li>
                        <h3>
                            <a href="../About/Mike.html">
                                <i class="fa fa-pencil"></i>
                                Mike
                            </a>
                        </h3>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<p class="lead">
    I have been contacted a couple of times in the last month by developers having problems with lambda expressions with GlassHtml. In this short blog post
    we will explore how to correctly write lambda expressions and why.
</p>

<h2>Expressions</h2>
<p>
    GlassHtml makes use of lambda expressions to describe which property should be made editable or rendered at run time. A simple example is:
</p>
<pre class="csharp">
    @Html.Glass().Editable(Model, x =&gt; x.Title)
</pre>
<p>
    In the Experience Editor this will create an editable field and in normal mode it will output the value in the Title field.
</p>
<p>
    It is important to realise that there are two parts to this lambda expression:  <br />
    <br />1. The target object, called Model in this example but could be any variable name.
    <br />2. The expression, which is made up of the body (<em>x.Title</em>) and the lambda parameter (<em>x</em>).
</p>
<p>When the lambda expression is executed, the target object is passed into the lambda expression. We can imagine this as a function call:</p>
<pre>
Func&lt;MyModel&gt; editTitle => (x) => x.Title;

editTitle(Model);
</pre>

<p>
    Lambda expression can be as complicated as you need them to be, but you must always use the lambda parameter in the expression body:
</p>

<pre class="csharp">
    @Html.Glass().Editable(Model, x =&gt; x.Children.First().Colour.Name)
</pre>

<h3>Doing It Wrong</h3>
<p>
    Lambda expressions where the lambda body references the target object (or another instance of an object) will have problems.
</p>
<p>
    For example the following expression is <strong>wrong</strong>  because the expression body references the target object.
</p>
<pre class="csharp">
      @Html.Glass().Editable(Model, x =&gt; Model.Title)
</pre>
<p>
    This second example is <strong>wrong</strong> because it references a another object in the expression:
</p>
<pre class="csharp">
     @{var childName = Model.SelectedName}
     @Html.Glass().Editable(page, x =&gt; x.Children.Where(y=>y.Name == childName).Colour.Name)
</pre>
<p>
   But why is this bad? See below.
</p>
<h2>Lambda Cache</h2>
<p>
    Lambda expressions are not compiled into executable code when you build your application. Instead they must be compiled at runtime before they can be executed. 
</p>
<p>
    Compiling a lambda expression is not a trival task and if you have a lot of them can cause a performance issue. To resolve this, Glass.Mapper.Sc uses a lambda cache.
    Once a lambda expression has been compiled it is cached for the life of the application. This means a lambda expression is only compiled once by your application.
</p>
<p>
    If you have written you lambda expressions correctly then this never causes you any problems. 
</p>
<p>
    If, however, you haven't, then you will start to seem some strange behaviour.
</p>
<p>
    Lets imagine for the moment that we incorrectly wrote the following lambda expression:
</p>
<pre class="csharp">
      @Html.Glass().Editable(Model, x =&gt; Model.Title)
</pre>
<p>
    The first time this lambda expression is compiled and executed, a reference to the current instance of Model will be compiled and cached. What does this mean?
</p>
<p> Well if your title property or Model contains the value "Sitecore Rocks", then on every page which this lamdba expression the value "Sitecore Rocks" will be returned. This will happen regardless of
    the value in Model because the first instance passed into the lambda expression was cached. All other Model values passed in are ignored.</p>
<p>
    Luckily solving the problem is simple!
</p>
<p> Simple update the expression to use the lamdba parameter:</p>
<pre class="csharp">
      @Html.Glass().Editable(Model, x =&gt; x.Title)
</pre>
<h2>Disabling the Lambda Cache</h2>
<p>
    Some developers have found a configuration property called UseGlassHtmlLambdaCache, by default this is set to true. <strong>DO NOT CHANGE THIS VALUE!!</strong> If you set this to false you 
    may cause performance issues on your solution. This flag is only here for our internal testing. If you have problems which you think are related to the lambda cache then check you lambda expressions 
    are correctly formatted.
</p>




<p>
    <em>- Mike</em>
</p>


    </div>

    <div class="row">
        <div class="row">
    <div class="devider devider-dashed margin-top-30 margin-bottom-30"></div>

    <div class="col-md-8">

        <div class="headline">
            <h2 class="">Glass needs your support!</h2>
        </div>

        <p>
            Glass.Mappper.Sc is supported by the generous donations of the Glass.Mapper.Sc community! Their donations help fund the time, effort and hosting for the project.
        </p>
        <p>
            These supporters are <strong>AMAZING</strong> and a huge thank you to all of you. You can find our list of supporters on the <a href="../rockstars-2.html">Rockstars page</a>.
        </p>
        <p>
            If <strong>you</strong> use Glass.Mapper.Sc and find it useful please consider supporting the project. Not only will you help the project but you could also get a discount on the
            Glass.Mapper.Sc training and join the Rockstars page.
        </p>

        <p class="text-center">
            <a href="https://www.patreon.com/glassmappersc" class="btn-u btn-u-lg" style="margin: 10px;">
                <em class=" fa fa-star icon-bg-darker"></em>
                Become a Rockstar
            </a>
        </p>

    </div>
    <div class="col-md-4 text-center">
        <img src="../Images/Blog/WeNeedYou.jpg" style="max-height:300px"/>
    </div>
</div>

        </div>
    </div>


        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../index.html" class="">
                                    <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-16.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/blog/2019-08-Lambda by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:21:43 GMT -->
</html>