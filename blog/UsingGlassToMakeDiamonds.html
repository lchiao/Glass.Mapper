


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/blog/UsingGlassToMakeDiamonds by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:22:35 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../content/css/style.css">
    <link rel="stylesheet" href="../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../Content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../content/site.css">

    <title>Using Glass to make Diamonds - Glass</title>

    <link rel="shortcut icon" href="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../Content/Site.js"></script>
    <script src="../google-code-prettify.googlecode.com/svn/loader/run_prettify.html"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../index.html">

                            <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

Blog -                         Using Glass to make Diamonds

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row padding-bottom-20">
        <p>
            <strong>
                <a href="../blog-2.html">&lt;&lt; Back to Blogs</a>
            </strong>
        </p>
    </div>
    <div class="row">


        
 

        
<div>
    
</div>
<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">
                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            08 Jan 2014
                        </h3>
                    </li>

                        <li>
                            <h3>
                                <a href="../About/Mike.html">
                                    <i class="fa fa-pencil"></i>
                                    Mike
                                </a>
                            </h3>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</div>

            <img src="../-/media/Images/Blogs/Diamongs14251425.jpg?h=150&amp;w=200&amp;la=en&amp;hash=DAE6186DF847C3B796082BC64E46D7892C90A263" class="pull-right img-responsive img-bordered margin-bottom-10 margin-left-10" alt="">
    




<p class="lead">
In this blog post I look at how other Sitecore ORMs can be integrated with Glass.Mapper so that you can request items that work
with these frameworks via Glass.Mapper.
</p>
<p>
For this blog post I will be using the Diamond project as the ORM I will be integrating with Glass.Mapper. The process should
be very similar if you want to integrate it with one of the other Sitecore ORMs.
</p>
<p>
The technique is useful if you want to migrate between different ORMs or you there are features of another ORM you want to leverage
with a Glass.Mapper solution.
</p>
<h3>The Configuration Task</h3>
<p>
The first step is making Glass.Mapper aware that a Diamond type has been requested. The first stage of this is to create a Configuration
Resolver Task. The code for this is:
</p>
<pre class="csharp">    public class DiamondConfigurationTask : IConfigurationResolverTask
    {
        public void Execute(ConfigurationResolverArgs args)
        {
            if (args.Result == null &amp;&amp; typeof(Diamond.Items.IStandardTemplate).IsAssignableFrom(args.RequestedType))
            {
                args.Result = new SitecoreTypeConfiguration();
                args.Result.Type = args.RequestedType;
            }
        }
    }


</pre>
<p>
We first check that no other result has been set and then we check if the requested type can be casde to the IStandardTemplate. All
classes in Diamond inherit the IStandardTemplate. If a Diamond class has been requested we create a very basic SitecoreTypeConfiguration
to represent the requested type. Notice that we aren't looking in Glass.Mapper's cached type list, it is much easier just to create
this config on the fly.
</p>
<h3>The Construction Task</h3>
<p>
The second step on the process is to create the Object Construction Task which will be responsible for creating the Diamond type. This is
again is a very simple class:
</p>
<pre class="csharp">    public class DiamondConstructionTask : IObjectConstructionTask
    {
        public void Execute(ObjectConstructionArgs args)
        {
            if (args.Result == null &amp;&amp; typeof (IStandardTemplate).IsAssignableFrom(args.Configuration.Type))
            {
                var scContext = args.AbstractTypeCreationContext as SitecoreTypeCreationContext;
                args.Result = scContext.Item.AsStronglyTyped();
            }
        }
    }
</pre>
<p>
Again we ensure that no other task has already set a value and then we check that the type request in the configuration is assignable from
IStandardTemplate. This configuration was set by our Configuration Resolver Task. If everything looks of we then get the Sitecore Creation
Context and then uses Diamonds Item extension method AsStronglyType to create the appropriate type for use.
</p>
<h3>Register The Tasks</h3>
<p>
The tasks now need to be registered with the Castle IOC container used by Glass.Mapper, you can do this in the GlassMapperScCustom
class that is added to your project when you download Glass.Mapper from Nuget:
</p>
<pre class="csharp">    public static  class GlassMapperScCustom
    {
		public static void CastleConfig(IWindsorContainer container){
			var config = new Config();

		    container.Register(
                Component.For&lt;IObjectConstructionTask&gt;().ImplementedBy&lt;DiamondConstructionTask&gt;(),
                Component.For&lt;IConfigurationResolverTask&gt;().ImplementedBy&lt;DiamondConfigurationTask&gt;()
		        );

			container.Install(new SitecoreInstaller(config));
		}

</pre>
<h3>Testing It Out</h3>
<p>
Now we have everything setup we can test this out. I have created my Diamond classes using Code Generation in TDS and I have a template called
BasicTemplate that looks like this:
</p>
<pre class="csharp">	[TemplateID("4ae36baf-b618-4cff-aa6f-a9de40fecefc")]
	public partial class BasicTemplate : StandardTemplate, IBasicTemplate
	{
		public static ID SourceTemplateID 
		{
			get { return new ID("4ae36baf-b618-4cff-aa6f-a9de40fecefc"); }
		}

		public BasicTemplate(Item innerItem) : base(innerItem) { }

		private TextProperty _title;
		public TextProperty Title 
		{
			get { return _title ?? (_title = new TextProperty(this.GetField("fcb08f69-4ba3-4331-b582-8bb7c3700d75"))); }
		}

	} // end class
</pre>
<p>
Within my subkayout I can request this template using the SitecoreContext class:
</p>
<pre class="csharp">    Model = context.GetCurrentItem&lt;BasicTemplate&gt;();
</pre>
<p>
Here we are now mixing and matching both Glass.Mapper and Diamond into a single solution. Another great way about how Glass.Mapper has been setup
means that I can also use my new Diamond classes on my Glass.Mapper models. For example I can create the following Glass.Mapper model that gets all
the children as Diamond classes:
</p>
<pre class="csharp">   public class MyGlassModel{
    
      public virtual IEnumerable&lt;BasicTemplate&gt; Children { get; set; }

   }
</pre>
<h3>Summary</h3>
<p>
Hopefully this has shown you how easy it is to mix Glass.Mapper with other ORMS and extend the functionality you get from the solution. Allowing
you to migrate or mix and match as you see fit.
</p>

    


    </div>

    <div class="row">
        <div class="row">
    <div class="devider devider-dashed margin-top-30 margin-bottom-30"></div>

    <div class="col-md-8">

        <div class="headline">
            <h2 class="">Glass needs your support!</h2>
        </div>

        <p>
            Glass.Mappper.Sc is supported by the generous donations of the Glass.Mapper.Sc community! Their donations help fund the time, effort and hosting for the project.
        </p>
        <p>
            These supporters are <strong>AMAZING</strong> and a huge thank you to all of you. You can find our list of supporters on the <a href="../rockstars-2.html">Rockstars page</a>.
        </p>
        <p>
            If <strong>you</strong> use Glass.Mapper.Sc and find it useful please consider supporting the project. Not only will you help the project but you could also get a discount on the
            Glass.Mapper.Sc training and join the Rockstars page.
        </p>

        <p class="text-center">
            <a href="https://www.patreon.com/glassmappersc" class="btn-u btn-u-lg" style="margin: 10px;">
                <em class=" fa fa-star icon-bg-darker"></em>
                Become a Rockstar
            </a>
        </p>

    </div>
    <div class="col-md-4 text-center">
        <img src="../Images/Blog/WeNeedYou.jpg" style="max-height:300px"/>
    </div>
</div>

        </div>
    </div>


        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../index.html" class="">
                                    <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '../www.google-analytics.com/analytics.html', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-16.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/blog/UsingGlassToMakeDiamonds by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:22:35 GMT -->
</html>