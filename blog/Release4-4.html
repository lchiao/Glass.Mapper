


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from www.glass.lu/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Jan 2019 10:13:45 GMT -->
<!-- Added by HTTrack -->

<!-- Mirrored from glass.lu/Blog/Release4-3 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:26:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



    <link rel="stylesheet" href="../content/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../content/css/style.css">
    <link rel="stylesheet" href="../content/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../content/css/theme-colors/default.css">
    <link rel="stylesheet" href="../content/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css">

    <link rel="stylesheet" href="../content/plugins/parallax-slider/css/parallax-slider.css">

    <link rel="stylesheet" href="../content/Site-Lessae52ae52.css?v=5" />
    <link rel="stylesheet" href="../content/site.css">

    <title>Release 4.3 - Glass</title>

    <link rel="shortcut icon" href="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-250.png">
    <!-- JS Global Compulsory -->
    <script type="text/javascript" src="../content/plugins/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="../content/plugins/jquery/jquery-migrate.min.js"></script>
    <script type="text/javascript" src="../content/plugins/bootstrap/js/bootstrap.min.js"></script>

    <script src="../content/Site.js"></script>
    <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/modernizr.js"></script>
    <script type="text/javascript" src="../content/plugins/parallax-slider/js/jquery.cslider.js"></script>


</head>


<body class="metro  mvc ">

    <div class="wrapper">

        <div class="header header-sticky header-fixed-shrink">
            <div class="topbar">
            </div>

            <!-- Navbar -->
            <div class="navbar navbar-default mega-menu" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="fa fa-bars"></span>
                        </button>
                        <a class="navbar-brand" href="../index.html">

                            <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                            <span style="vertical-align: middle;">Glass</span>

                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse navbar-responsive-collapse">
                        <ul class="nav navbar-nav">

                            <li class="">

                                <a href="../Support.html">Support</a>
                            </li>
                            <li class="">

                                <a href="../Training.html">Training</a>
                            </li>
                            <li class="">

                                <a href="../Blog.html">Blog</a>
                            </li>
                            <li class="">

                                <a href="../Mapper.html">Glass.Mapper.Sc</a>
                            </li>
                            <li class="">

                                <a href="../Rockstars.html">Our Backers</a>
                            </li>
                            <li class="">

                                <a href="../About.html">About</a>
                            </li>
                        </ul>
                    </div><!--/navbar-collapse-->
                </div>
            </div>
            <!-- End Navbar -->
        </div>

            <div class="breadcrumbs">
                <div class="container">
                    <h1 class="pull-left">

Blog -                         Release 4.3

                    </h1>

                </div><!--/container-->
            </div>

        


<div class="container content">
    <div class="row padding-bottom-20">
        <p>
            <strong>
                <a href="../blog-2.html">&lt;&lt; Back to Blogs</a>
            </strong>
        </p>
    </div>
    <div class="row">


        
 

        
<div>
    
</div>
<div class="row">
    <div class="col-md-12">

        <div class="blog margin-bottom-40">
            <div class="blog-post-tags">
                <ul class="list-unstyled list-inline blog-info pull-right">
                    <li>
                        <h3>
                            <i class="fa fa-calendar"></i>
                            08 Dec 2016
                        </h3>
                    </li>

                        <li>
                            <h3>
                                <a href="../About/Mike.html">
                                    <i class="fa fa-pencil"></i>
                                    Mike
                                </a>
                            </h3>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</div>

            <img src="../-/media/Images/Blogs/2016/release43d4e0d4e0.jpg?h=153&amp;w=200&amp;la=en&amp;hash=31BA9EAAC3FC611F5B2B299E0A4133E00433280D" class="pull-right img-responsive img-bordered margin-bottom-10 margin-left-10" alt="">
    




<p>
This blog post gives you early information on Release 4.3 of Glass.Mapper.Sc! Check out the new features and let us know what you think.
</p>
<h3>Pipeline Changes</h3>
<p>
In this release we have changed how pipelines are handled by Glass.Mapper. We are no longer using the Sitecore style pipelines where each task in the pipeline is automatically called after the previous task unless an abort has been called.
</p>
<p>
Instead we are moving to the Middleware pipeline style used by the new ASP.NET Core MVC where a task explicitly calls the next task in the pipeline or decides to do something else. We have made this change for several reasons:
</p>
<ul>
    <li>It provides you with much more control about how the pipeline executes. You can easily decided to branch the pipeline and do something completely different.</li>
    <li>Simplifies logic that is dependant on tasks that follow. For example in the original pipeline style we needed two tasks for caching. The first task would check the cache and the second task would add an object to the cache. This can now be combined into one single cache task making the logic much simpler. </li>
    <li>Ability to handle exceptions in the pipeline. If a tasks after your task throws an exception then your task can now handle it.</li>
    <li>Allows more advanced features to be developed. For example the cachable lazy load disabler discussed later.</li>
</ul>
<h4>So what has changed?</h4>
<p>
Firstly the following interfaces have been replaced with abstract classes:
</p>
<ul>
    <li>IObjectSavingTask to  AbstractObjectSavingTask</li>
    <li>IObjectConstructionTask  to AbstractObjectConstructionTask</li>
    <li>IDataMapperResolverTask to AbstractDataMapperResolverTask</li>
    <li>IConfigurationResolverTask to AbstractConfigurationResolverTask</li>
</ul>
<p>
All pipeline tasks now inherit from the AbstractPipelineTask which contains two important methods:
</p>
<ul>
    <li>Execute - Called by the framework to perform an action in the pipeline.</li>
    <li>Next - Use to call the next task  in the pipeline.</li>
</ul>
<p>
Normally you can just override the Execute method and when you are ready to call the next task in the pipeline you simple call <strong>base.Execute</strong>, for example:
</p>
<pre class="csharp">public class MyTask : AbstractObjectConstructionTask{
              public override void Execute(ObjectConstructionArgs args)
               { 
                //do some work
                base.Execute(args);
                }
}
</pre>
<p>Any tasks that you have already created pre version 4.3 will need to be updated to work with this approach.
For more information on how a Middleware pipeline works please read Microsoft information:</p>
<p>
<a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware">https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware</a>
</p>
<h3>Cachable Changes</h3>
<p>
One of the many great features of Glass.Mapper is the ability to cache your models and then reuse them almost anywhere in your solution. However this came with one restriction, you need to turn off lazy loading for any properties that referenced other Sitecore items. This was to ensure that all data was loaded in the same context as the originally requested model. A model would look like this:</p>
<pre class="csharp">public class MyModel {
   [SitecoreParent(IsLazy=false)]
   public virtual MyParent Parent { get; set; }
        
   [SitecoreChildren(IsLazy=false)]
   public virtual MyChild Children {get; set; }
}
</pre>
<p>
This solution had several problems:
</p>
<ul>
    <li>Remembering to add IsLazy = false to the correct properties.</li>
    <li>The class isnÃ¢â‚¬â„¢t reusable in scenarios where Lazy Loading should be enabled.</li>
    <li>Linked classes, e.g. MyParent and MyChild in the example, may contain further properties where lazy loading needs to be disabled.</li>
    <li>To easy to make a mistake.</li>
</ul>
<p>
In this release we have introduced the <strong>DisableLazyLoading</strong> class. If your model has been marked as Cachable then we will automatically disable lazy loading while the model is constructed which  includes all models generated via property references. Therefore if your mark a model as cachable you no longer need to set the IsLazy = false flag. We have also added a depth check mechanism that attempts to detect if a cached model contains a loop. This is achieved by counting the depth of the models created, for example the requested model is at depth 1, a model mapped to a property of this model is depth 2, a model mapped to that model is depth 3 and so on. The depth check allows a maximum depth of 8 before throwing an exception.</p>
<p>If you wish to disable these new features you can use the following code:</p>
<pre class="csharp">            var factory =
                dependencyResolver.ObjectConstructionFactory as AbstractConfigFactory&lt;AbstractObjectConstructiontask&gt;;
            factory.Remove&lt;ModelDepthCheck&gt;();
            config.EnableLazyLoadingForCachableModels = true;
</pre>
<p>This feature can be controlled by the config setting <strong>EnableLazyLoadingForCachableModels</strong> which is set to true by default.</p>
<h3>Diagnostic Changes</h3>
<p>
We have update the diagnostic information we supply so that it gives more information. Once diagnostics have been enabled you will be able to monitor the following object creation information:</p>
<ul>
    <li>Proxy Models Created</li>
    <li>Total Models Mapped - not all models are mapped because of lazy loading but proxy maybe generated.</li>
    <li>Total Models Requested</li>
    <li>Cached models returned</li>
    <li>Concrete models created - e.g. models that didnÃ¢â‚¬â„¢t require a proxy object to be created (interfaces and lazy loading).</li>
</ul>
<h3>GetModelFromView</h3>
<p>
We have been working on some improvements to the GetModelFromView processor after a report of a performance problem by Alex (<a href="https://github.com/mikeedwards83/Glass.Mapper/issues/253">Issue 253</a>). From out testing it seems that the first load of any CSHTML files would take a long time. This was caused by the compiling of the CSHTML file using the BuildManager.GetCompiledType method. Added to this we were also compiling Sitecore SPEAK views.
</p>
<p>
To solve this we have made to changes, firstly any request for a CSHTML file when the site is Shell will be ignored (we assume it is a SPEAK view). Secondly we have extracted how we find the target type. By default Glass will now use a <a href="https://github.com/mikeedwards83/Glass.Mapper/blob/develop/Source/Glass.Mapper.Sc.Mvc/Pipelines/Response/RegexViewTypeResolver.cs">Regex resolver</a> which is significantly quicker. Since this has been abstracted you can now swap this for alternative implementations if you need something more specific and we have created a resolver that works with Compile Razor views which we will blog soon!</p>
<p>If you find issues with the Regex View Resolve causes issue with your solution you can configure Glass to use the original version with this code:</p>
<pre class="csharp">        GetModelFromView.ViewTypeResolver = new ChainedViewTypeResolver(
                new IViewTypeResolver[] {
                    new RegexViewTypeResolver(),
                    new BuildManagerViewTypeResolver()
                   });
</pre>
<p>This code can be added to the PostLoad event of the GlassMapperScCustom class.</p>
<h3>Unit Tests</h3>
<p>
We have spent a lot of time getting unit tests running on the build server and we have now successfully got the majority of them running. Unit tests on the build server are run against Sitecore versions 8.0, 8.1 and 8.2 with a total of 2200+ tests run per build!</p>
<p>
We have also fully embraced Sitecore FakeDB making it much easier for contributors to test their changes.</p>

    


    </div>

    <div class="row">
        <div class="row">
    <div class="devider devider-dashed margin-top-30 margin-bottom-30"></div>

    <div class="col-md-8">

        <div class="headline">
            <h2 class="">Glass needs your support!</h2>
        </div>

        <p>
            Glass.Mappper.Sc is supported by the generous donations of the Glass.Mapper.Sc community! Their donations help fund the time, effort and hosting for the project.
        </p>
        <p>
            These supporters are <strong>AMAZING</strong> and a huge thank you to all of you. You can find our list of supporters on the <a href="../rockstars-2.html">Rockstars page</a>.
        </p>
        <p>
            If <strong>you</strong> use Glass.Mapper.Sc and find it useful please consider supporting the project. Not only will you help the project but you could also get a discount on the
            Glass.Mapper.Sc training and join the Rockstars page.
        </p>

        <p class="text-center">
            <a href="https://www.patreon.com/glassmappersc" class="btn-u btn-u-lg" style="margin: 10px;">
                <em class=" fa fa-star icon-bg-darker"></em>
                Become a Rockstar
            </a>
        </p>

    </div>
    <div class="col-md-4 text-center">
        <img src="../Images/Blog/WeNeedYou.jpg" style="max-height:300px"/>
    </div>
</div>

        </div>
    </div>


        <div class="footer-v1">
            <div class="footer">
                <div class="container">
                    <div class="row">
                        <!-- About -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="row text-center margin-bottom-10 margin-top-20">
                                <a href="../index.html" class="">
                                    <img src="../-/media/Images/Common/Horizon-Bordered-BlazeOrange-2503ca73ca7.png?h=50&amp;w=50&amp;la=en&amp;hash=C5F3C6D5FCB00EBE826D80BE26742A4D078D12D4" id="logo-header" alt="" />
                                </a>
                            </div>

                            <p>Glass is home to the #1 ORM for Sitecore. Glass.Mapper is the easiest way to map data from your Sitecore solution to your code.</p>
                        </div><!--/col-md-3-->
                        <!-- End About -->
                        <!-- Latest -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Sponsored by</h2>
                            </div>
                            <a href="https://refractdns.com/">
                                <img src="../-/media/Images/Tiles/RDNS_Logo_WithTextWhite.png" style="width: 100%" class="img-responsive">
                            </a>
                        </div><!--/col-md-3-->
                        <!-- End Latest -->
                        <!-- Link List -->
                        <div class="col-md-3 md-margin-bottom-40">
                            <div class="headline">
                                <h2>Useful Links</h2>
                            </div>
                            <ul class="list-unstyled link-list">
                                <li><a href="../Blog.html">Blog</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Training.html">Training</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Mapper.html">Glass.Mapper.Sc</a><i class="fa fa-angle-right"></i></li>
                                <li><a href="../Support.html">Support</a><i class="fa fa-angle-right"></i></li>
                            </ul>
                        </div><!--/col-md-3-->
                        <!-- End Link List -->
                        <!-- Address -->
                        <div class="col-md-3 map-img md-margin-bottom-40">
                            <div class="headline">
                                <h2>Contact Us</h2>
                            </div>
                            <address class="md-margin-bottom-40">
                                Twitter: <a class="element brand" href="http://twitter.com/@glasslu" target="_blank">@glasslu</a><br>
                                Email: <a class="element brand" href="mailto:hello@glass.lu">hello@glass.lu</a> <br />
                                M C Edwards Ltd trading as Glass<br />
                                Company No.:08641300 <br />
                            </address>
                        </div><!--/col-md-3-->
                        <!-- End Address -->
                    </div>
                </div>

            </div><!--/footer-->
        </div>
        <!-- 1/10/2019 8:47:53 AM -->
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date(); a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '../www.google-analytics.com/analytics.html', 'ga');

            ga('create', 'UA-55731850-1', 'auto');
            ga('send', 'pageview');

        </script>


        <div class="footer-v1">

            <div class="copyright">
                <div class="container">
                    <div class="row">
                        <div class="col-md-3">
                            <p>
                                2019 &copy; All Rights Reserved.
                            </p>
                        </div>
                        <div class="col-md-9">

                            <p>
                                <a href="../-/media/Files/Privacy_Policy_and_Cookie_Policy_Europe.pdf">Privacy Policy</a> | <a href="../-/media/Files/Website_TCs_Template.pdf">Terms and Conditions</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div><!--/copyright-->
        </div>

        <div class="hidden" id="perfResults">
            <li class="topbar-devider"></li>
            <li>
                <i class="fa fa-clock-o" title="Page Render Time"></i> 30
            </li>
            <li>
                <img src="content/icon-bbbbbb-17.html" title="Glass Time" style="width: 8px;"> 3
            </li>
            <li>
                <i class="fa fa-pencil-square-o" title="Glass items requested"></i> 13
            </li>
            <li>
                <i class="fa fa-cloud" title="Glass items from cache"></i> 10
            </li>
        </div>
        <script>
            (function ($) {

                $(function () {
                    var results = $("#perfResults");
                    var placeholder = $("#resultsReplaces");

                    var html = results.html();
                    placeholder.replaceWith(html);
                });
            })(jQuery);
        </script>




    </div>
</body>


<!-- Mirrored from glass.lu/Blog/Release4-3 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 May 2021 11:26:13 GMT -->
</html>